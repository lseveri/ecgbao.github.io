
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>TestFlight:iOS Beta测试 | 跳跳魔王的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="跳跳魔王">
    

    
    <meta name="description" content="TestFlight Beta Testing is an Apple product that makes it easy to invite users to test your iOS, watchOS and tvOS apps before you release them into the App Store. This TestFlight tutorial will walk yo">
<meta property="og:type" content="article">
<meta property="og:title" content="TestFlight:iOS Beta测试">
<meta property="og:url" content="http://yoursite.com/2016/12/16/TestFlight-iOS-Beta测试/index.html">
<meta property="og:site_name" content="跳跳魔王的博客">
<meta property="og:description" content="TestFlight Beta Testing is an Apple product that makes it easy to invite users to test your iOS, watchOS and tvOS apps before you release them into the App Store. This TestFlight tutorial will walk yo">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/1-Code-Signing.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2015/04/2-Product-Archive1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/06/3-Archive1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/4-Choose-Team1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/5-Upload1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/6-Upload2.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/Success.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/10-Users-and-Roles.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/06/11-Users-650x95.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/06/15-Roles.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/06/16-Roles2.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/17-Notifications.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/20-My-Apps.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/Activity.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/StartTesting.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/30-TestInformation.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/32-External1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/33-External2.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/34-BetaTest1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/35-BetaTest2.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/31-AppInReview.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/Screen-Shot-2016-05-30-at-11.58.51.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/21-Email.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/19-Settings1.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/20-Log-In.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/21-Search.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/24-Invite-Email.png">
<meta property="og:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/25-Accept.png">
<meta property="og:updated_time" content="2016-12-16T05:29:20.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TestFlight:iOS Beta测试">
<meta name="twitter:description" content="TestFlight Beta Testing is an Apple product that makes it easy to invite users to test your iOS, watchOS and tvOS apps before you release them into the App Store. This TestFlight tutorial will walk yo">
<meta name="twitter:image" content="https://koenig-media.raywenderlich.com/uploads/2016/05/1-Code-Signing.png">

    
    <link rel="alternative" href="/atom.xml" title="跳跳魔王的博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="跳跳魔王的博客">跳跳魔王的博客</a></h1>
				<h2 class="blog-motto">每天进步一点点</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/16/TestFlight-iOS-Beta测试/" title="TestFlight:iOS Beta测试" itemprop="url">TestFlight:iOS Beta测试</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="跳跳魔王" target="_blank" itemprop="author">跳跳魔王</a>
		
  <p class="article-time">
    <time datetime="2016-12-16T04:48:45.000Z" itemprop="datePublished"> 发表于 2016-12-16</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Submitting-your-Build-to-iTunes-Connect"><span class="toc-number">1.</span> <span class="toc-text">Submitting your Build to iTunes Connect</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Create-and-Enable-Testers-to-Beta-Test-Apps"><span class="toc-number">2.</span> <span class="toc-text">Create and Enable Testers to Beta Test Apps</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Starting-Beta-Testing"><span class="toc-number">3.</span> <span class="toc-text">Starting Beta Testing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Testing-an-App"><span class="toc-number">4.</span> <span class="toc-text">Testing an App</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TestFlight-App"><span class="toc-number">5.</span> <span class="toc-text">TestFlight App</span></a></li></ol>
		
		</div>
		
		<p>TestFlight Beta Testing is an Apple product that makes it easy to invite users to test your iOS, watchOS and tvOS apps before you release them into the App Store. This TestFlight tutorial will walk you through integrating TestFlight into your own apps.<br>This is one of those rare tutorials where you don’t have to code — just follow through the steps in this tutorial and you’ll be up and running with TestFlight in no time! :]</p>
<h1 id="Submitting-your-Build-to-iTunes-Connect"><a href="#Submitting-your-Build-to-iTunes-Connect" class="headerlink" title="Submitting your Build to iTunes Connect"></a>Submitting your Build to iTunes Connect</h1><p>Open up your project in Xcode, make sure you have a correct Bundle Identifier, that your Team ID is set, and that you’ve chosen the automatic Distribution Certificate Code Signing Identity:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/1-Code-Signing.png"><br></div><br>Choose Product\Archive from the top toolbar:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2015/04/2-Product-Archive1.png"><br></div><br>Once Xcode finishes archiving your project, click the shiny blue Upload to App Store… button:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/06/3-Archive1.png"><br></div><br>Now you need to choose your development team:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/4-Choose-Team1.png"><br></div><br>Finally, click Upload:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/5-Upload1.png"><br></div><br>Wait for a few minutes as your build uploads. Grab a coffee, perhaps, or if you have a slow internet connection, go grab a bite. Or two. Or three. :]</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/6-Upload2.png"><br></div><br>Once you’re done, you should receive a success message like the following:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/Success.png"><br></div><br>That’s all the work required for Xcode. Your beta build is now available on iTunes Connect, and that’s where you’ll be doing the rest of the work to set up TestFlight.</p>
<h1 id="Create-and-Enable-Testers-to-Beta-Test-Apps"><a href="#Create-and-Enable-Testers-to-Beta-Test-Apps" class="headerlink" title="Create and Enable Testers to Beta Test Apps"></a>Create and Enable Testers to Beta Test Apps</h1><p>Your build is ready for testing, but who’s going to test it?<br>Apple defines two types of testers for Test Flight:<br>Internal Tester: This is an iTunes Connect user that has an Admin, Technical, App Manager, Developer, or Marketer role with access to your app. This is usually a team member or a client you’re developing an app for. You can add up to 25 internal testers.<br>Note: Apple are in the process of deprecating the Technical role in favour of the App Manager role. At the time of writing both roles are available. If you have existing users with the Technical role you should start migrating them over to the App Manager role. New users should be created with the App Manager role.<br>External Tester: This is any user outside of your team that wants to test your app. An external tester has no access to your iTunes Connect account in any way, and can only download and install the app. You can add up to 2000 external testers.<br>Before your external developers can test your app, you have to submit your app to be reviewed by Apple, just as you would with a normal App Store submission. These reviews tend to go faster than normal app reviews (although don’t count on it), and once it’s approved you can let external developers test your app. Internal testers, on the other hand, are instantaneously able to test new builds.<br>You’ll learn more about external testers later, but for now, let’s focus on internal testers.<br>To add an internal tester, head to the Users and Roles section in iTunes Connect:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/10-Users-and-Roles.png"><br></div><br>On the Users and Roles screen, click the + button to add a new user:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/06/11-Users-650x95.png"><br></div><br>Fill in your new user info and click Next:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/06/15-Roles.png"><br></div><br>You’ll need to use a unique email address for your new user. If you don’t have a second email account, you can usually append +whateveryouwant to the first part of your email address, and the email will still get delivered to you. For example tom+mytestaccount@razeware.com.<br>Now you need to assign roles for the user. In most cases, you’ll want to choose App Manager. You can read more about the privileges for each role and choose the appropriate one for your user.<br>Note: The number of different roles and permissions can be a bit daunting! When it comes to Test Flight, use this handy table to help you.<br>Admin    App Manager    Developer    Marketer    Sales<br>Can be an Internal Tester    ✓    ✓    ✓    ✓    ✗<br>Can Upload a Build    ✓    ✓    ✓    ✗    ✗<br>Can Submit a Build for External Testing    ✓    ✓    ✗    ✗    ✗<br>Once that’s done, click Next:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/06/16-Roles2.png"><br></div><br>Choose the type of notifications you want your new testers to receive, then click Save:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/17-Notifications.png"><br></div><br>Your user is now created, but as the message indicates, that user first needs to verify his or her email address before the account will show in iTunes Connect.<br>Creating a new internal beta tester is only the first part of the process. The remaining step is to invite this particular tester to test your latest build.<br>It’s time to enable your app for testing — so the tester actually has something to test! :]</p>
<h1 id="Starting-Beta-Testing"><a href="#Starting-Beta-Testing" class="headerlink" title="Starting Beta Testing"></a>Starting Beta Testing</h1><p>To start beta testing of your app, go to the My Apps section on the iTunes Connect home page and click on your app:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/20-My-Apps.png"><br></div><br>Select the Activity tab and you’ll find your latest build. Make sure it is no longer marked as processing. If it is, go make another cup of coffee and come back later. :]</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/Activity.png"><br></div><br>Next, click on the TestFlight tab, then Internal Testing in the left hand menu. Click Select Version to Test and choose the version you just uploaded. Finally, click Start Testing and, in the confirmation pop-up, Start Testing again.</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/StartTesting.png"><br></div><br>All selected testers will now receive an email that lets them download and install this build from the TestFlight app. There are detailed instructions on how to do that in the last section of this tutorial.<br>That takes care of internal testers, but what about external testers?<br>That’s just as easy! First, go to the Test Information tab and fill in your Feedback Email, Marketing URL and Privacy Policy URL. You can choose to add a License Agreement at this stage as well if you wish, but it is not necessary.</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/30-TestInformation.png"><br></div><br>Next, go to the External Testing tab, click the + button and select Add New Testers:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/32-External1.png"><br></div><br>Add the email addresses of any external users you want to add. Once you’re finished, click Add to add these testers to your account. All external testers will count toward your 2000 external tester limit:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/33-External2.png"><br></div><br>Click Save.<br>You now need to select a build (again) for your external testers, and put that build through the Beta App Review.<br>Note: Why do you need to select the build again? Well you may want your internal and external testers to be testing different builds. For example, your external testers may be testing your next release candidate, but your internal testers are testing your master build. By making you select a build for internal and external testers separately iTunes Connect allows this kind of separation.<br>Click Add Build To Test, select your build, and then click Next.</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/34-BetaTest1.png"><br></div><br>Fill in all the fields. Remember – the more information you give Apple the easier it is for them to review your app! Finally, hit Submit.</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/35-BetaTest2.png"><br></div><br>Your app will be added to the review queue! :]<br>Note: In my own experience, your first beta app review can take up to 48 hours to be approved. Subsequent beta app reviews are usually much faster.</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/31-AppInReview.png"><br></div><br>Once the app has passed Beta App Review you will receive an email with confirmation that your app can now be used by external testers.<br>Note: A build is only valid for 60 days. If you want your testers to use the app beyond that, you’ll have to upload a new build before the expiration date.<br>Head back to the External Testing section for your app in iTunes Connect, select the build and hit Save. A dialog will pop up confirming that you are about to notify people. Click Start Testing.</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/Screen-Shot-2016-05-30-at-11.58.51.png"><br></div><br>Your external testers will then receive an invitation email similar to the one received by your internal testers as described above.<br>Note: What happens if invites go missing? Currently there is no easy way to re-send invite emails if they go missing. For internal testers the easiest approach is probably to upload a new build (as it doesn’t have to go through Beta App Review). For external testers you can either remove the user and then re-add the user as a tester, or remove your app from external testing and then quickly re-add it. This second approach will re-send an email invite to all your external testers so be careful! :]<br>That shows the developer’s perspective of app testing, but what does it look like from the tester’s perspective?</p>
<h1 id="Testing-an-App"><a href="#Testing-an-App" class="headerlink" title="Testing an App"></a>Testing an App</h1><p>As an internal tester, you need to link your Apple ID to iTunes Connect (external testers can skip to the TestFlight App section below). By now, you should have received an email from iTunes Connect that looks like this:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/21-Email.png"><br></div><br>Click on activate your account and follow the supplied steps. Once your account is ready for testing, get your iOS device and go to the Settings app. Scroll down to iTunes &amp; App Store:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/19-Settings1.png"><br></div><br>Log in with the account you just verified a minute ago. If you’re already logged in with another account, log out first:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/20-Log-In.png"><br></div></p>
<h1 id="TestFlight-App"><a href="#TestFlight-App" class="headerlink" title="TestFlight App"></a>TestFlight App</h1><p>Go to the App Store, and search for the TestFlight app:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/21-Search.png"><br></div><br>Download the TestFlight app and launch it.<br>Note: If you’re required to log in, simply use the same credentials you used to verify your account.<br>Internal testers will automatically receive an email when new versions of the app are uploaded to iTunes Connect. External testers will receive a similar email after the app has been through Beta App Review and the build has been pushed out to external testers by an Admin or App Manager in iTunes Connect:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/24-Invite-Email.png"><br></div><br>Open this email on your testing device, then tap Start Testing. This will launch TestFlight and show you the app you need to test. A tester must tap Start Testing on the device they’ll be testing on; otherwise the app won’t be available for download by the tester. Tap Accept, then Install, and wait for the app to download:</p>
<p><div style="text-align:center"><br><img src="https://koenig-media.raywenderlich.com/uploads/2016/05/25-Accept.png"><br></div><br>The app will be downloaded and appear on your home screen!<br>That was the hardest part of being a tester. From now on, whenever a new version of this app is available, you’ll see a notification from TestFlight. All you need to do is update your app and run the latest version.</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/12/16/TestFlight-iOS-Beta测试/" data-title="TestFlight:iOS Beta测试 | 跳跳魔王的博客" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2016/10/28/Swift-编程语言（Swift-3-0-1）/"  title="Swift 编程语言（Swift 3.0.1）">
 <strong>下一篇：</strong><br/> 
 <span>Swift 编程语言（Swift 3.0.1）
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/12/16/TestFlight-iOS-Beta测试/" data-title="TestFlight:iOS Beta测试" data-url="http://yoursite.com/2016/12/16/TestFlight-iOS-Beta测试/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Submitting-your-Build-to-iTunes-Connect"><span class="toc-number">1.</span> <span class="toc-text">Submitting your Build to iTunes Connect</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Create-and-Enable-Testers-to-Beta-Test-Apps"><span class="toc-number">2.</span> <span class="toc-text">Create and Enable Testers to Beta Test Apps</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Starting-Beta-Testing"><span class="toc-number">3.</span> <span class="toc-text">Starting Beta Testing</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Testing-an-App"><span class="toc-number">4.</span> <span class="toc-text">Testing an App</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TestFlight-App"><span class="toc-number">5.</span> <span class="toc-text">TestFlight App</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  

  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://www.mhealth365.cn/" target="_blank" title="一款温暖的心电监测设备">熙健-掌上心电</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> I&#39;m an iOS engineer <br/>
			Hala Madrid</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2779746325" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="跳跳魔王">跳跳魔王</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"ecgbao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
